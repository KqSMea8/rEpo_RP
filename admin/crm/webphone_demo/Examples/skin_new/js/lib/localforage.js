/*!
    localForage -- Offline Storage, Improved
    Version 1.1.1
    http://mozilla.github.io/localForage
    (c) 2013-2014 Mozilla, Apache License 2.0
*/
(function(){var d,a,c,b;(function(){var f={},e={};d=function(g,h,i){f[g]={deps:h,callback:i}};b=c=a=function(g){b._eak_seen=f;if(e[g]){return e[g]}e[g]={};if(!f[g]){throw new Error("Could not find module "+g)}var n=f[g],r=n.deps,q=n.callback,k=[],j;for(var m=0,h=r.length;m<h;m++){if(r[m]==="exports"){k.push(j={})}else{k.push(a(p(r[m])))}}var o=q.apply(this,k);return e[g]=j||o;function p(x){if(x.charAt(0)!=="."){return x}var w=x.split("/");var t=g.split("/").slice(0,-1);for(var v=0,s=w.length;v<s;v++){var u=w[v];if(u===".."){t.pop()}else{if(u==="."){continue}else{t.push(u)}}}return t.join("/")}}})();d("promise/all",["./utils","exports"],function(i,g){var e=i.isArray;var h=i.isFunction;function f(j){var k=this;if(!e(j)){throw new TypeError("You must pass an array to all.")}return new k(function(q,p){var n=[],o=j.length,s;if(o===0){q([])}function r(t){return function(u){l(t,u)}}function l(t,u){n[t]=u;if(--o===0){q(n)}}for(var m=0;m<j.length;m++){s=j[m];if(s&&h(s.then)){s.then(r(m),p)}else{l(m,s)}}})}g.all=f});d("promise/asap",["exports"],function(o){var m=(typeof window!=="undefined")?window:{};var j=m.MutationObserver||m.WebKitMutationObserver;var l=(typeof global!=="undefined")?global:(this===undefined?window:this);function k(){return function(){process.nextTick(n)}}function g(){var r=0;var p=new j(n);var q=document.createTextNode("");p.observe(q,{characterData:true});return function(){q.data=(r=++r%2)}}function i(){return function(){l.setTimeout(n,1)}}var h=[];function n(){for(var r=0;r<h.length;r++){var q=h[r];var s=q[0],p=q[1];s(p)}h=[]}var f;if(typeof process!=="undefined"&&{}.toString.call(process)==="[object process]"){f=k()}else{if(j){f=g()}else{f=i()}}function e(r,p){var q=h.push([r,p]);if(q===1){f()}}o.asap=e});d("promise/config",["exports"],function(g){var f={instrument:false};function e(h,i){if(arguments.length===2){f[h]=i}else{return f[h]}}g.config=f;g.configure=e});d("promise/polyfill",["./promise","./utils","exports"],function(j,f,g){var e=j.Promise;var i=f.isFunction;function h(){var l;if(typeof global!=="undefined"){l=global}else{if(typeof window!=="undefined"&&window.document){l=window}else{l=self}}var k="Promise" in l&&"resolve" in l.Promise&&"reject" in l.Promise&&"all" in l.Promise&&"race" in l.Promise&&(function(){var m;new l.Promise(function(n){m=n});return i(m)}());if(!k){l.Promise=e}}g.polyfill=h});d("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(y,e,A,m,C,r,F,l){var J=y.config;var K=y.configure;var x=e.objectOrFunction;var f=e.isFunction;var i=e.now;var j=A.all;var o=m.race;var q=C.resolve;var h=r.reject;var B=F.asap;var w=0;J.async=B;function k(M){if(!f(M)){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}if(!(this instanceof k)){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}this._subscribers=[];I(M,this)}function I(Q,P){function M(R){D(P,R)}function O(R){p(P,R)}try{Q(M,O)}catch(N){O(N)}}function G(T,V,S,O){var M=f(S),R,Q,U,N;if(M){try{R=S(O);U=true}catch(P){N=true;Q=P}}else{R=O;U=true}if(z(V,R)){return}else{if(M&&U){D(V,R)}else{if(N){p(V,Q)}else{if(T===g){D(V,R)}else{if(T===L){p(V,R)}}}}}}var s=void 0;var v=0;var g=1;var L=2;function u(M,R,Q,P){var O=M._subscribers;var N=O.length;O[N]=R;O[N+g]=Q;O[N+L]=P}function E(Q,M){var S,R,P=Q._subscribers,O=Q._detail;for(var N=0;N<P.length;N+=3){S=P[N];R=P[N+M];G(M,S,R,O)}Q._subscribers=null}k.prototype={constructor:k,_state:undefined,_detail:undefined,_subscribers:undefined,then:function(R,P){var Q=this;var N=new this.constructor(function(){});if(this._state){var O=arguments;J.async(function M(){G(Q._state,N,O[Q._state-1],Q._detail)})}else{u(this,N,R,P)}return N},"catch":function(M){return this.then(null,M)}};k.all=j;k.race=o;k.resolve=q;k.reject=h;function z(Q,O){var P=null,M;try{if(Q===O){throw new TypeError("A promises callback cannot return that same promise.")}if(x(O)){P=O.then;if(f(P)){P.call(O,function(R){if(M){return true}M=true;if(O!==R){D(Q,R)}else{n(Q,R)}},function(R){if(M){return true}M=true;p(Q,R)});return true}}}catch(N){if(M){return true}p(Q,N);return true}return false}function D(N,M){if(N===M){n(N,M)}else{if(!z(N,M)){n(N,M)}}}function n(N,M){if(N._state!==s){return}N._state=v;N._detail=M;J.async(H,N)}function p(N,M){if(N._state!==s){return}N._state=v;N._detail=M;J.async(t,N)}function H(M){E(M,M._state=g)}function t(M){E(M,M._state=L)}l.Promise=k});d("promise/race",["./utils","exports"],function(h,g){var e=h.isArray;function f(i){var j=this;if(!e(i)){throw new TypeError("You must pass an array to race.")}return new j(function(n,m){var l=[],o;for(var k=0;k<i.length;k++){o=i[k];if(o&&typeof o.then==="function"){o.then(n,m)}else{n(o)}}})}g.race=f});d("promise/reject",["exports"],function(f){function e(h){var g=this;return new g(function(j,i){i(h)})}f.reject=e});d("promise/resolve",["exports"],function(f){function e(h){if(h&&typeof h==="object"&&h.constructor===this){return h}var g=this;return new g(function(i){i(h)})}f.resolve=e});d("promise/utils",["exports"],function(h){function g(j){return i(j)||(typeof j==="object"&&j!==null)}function i(j){return typeof j==="function"}function e(j){return Object.prototype.toString.call(j)==="[object Array]"}var f=Date.now||function(){return new Date().getTime()};h.objectOrFunction=g;h.isFunction=i;h.isArray=e;h.now=f});a("promise/polyfill").polyfill()}());(function(){var i=(typeof module!=="undefined"&&module.exports)?require("promise"):this.Promise;var b=b||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;if(!b){return}function h(q){var p=this;var o={db:null};if(q){for(var r in q){o[r]=q[r]}}return new i(function(u,t){var s=b.open(o.name,o.version);s.onerror=function(){t(s.error)};s.onupgradeneeded=function(){s.result.createObjectStore(o.storeName)};s.onsuccess=function(){o.db=s.result;p._dbInfo=o;u()}})}function n(p,r){var o=this;if(typeof p!=="string"){window.console.warn(p+" used as a key, but it is not a string.");p=String(p)}var q=new i(function(t,s){o.ready().then(function(){var u=o._dbInfo;var v=u.db.transaction(u.storeName,"readonly").objectStore(u.storeName);var w=v.get(p);w.onsuccess=function(){var x=w.result;if(x===undefined){x=null}t(x)};w.onerror=function(){s(w.error)}})["catch"](s)});k(q,r);return q}function e(p,q,s){var o=this;if(typeof p!=="string"){window.console.warn(p+" used as a key, but it is not a string.");p=String(p)}var r=new i(function(u,t){o.ready().then(function(){var v=o._dbInfo;var w=v.db.transaction(v.storeName,"readwrite").objectStore(v.storeName);if(q===null){q=undefined}var x=w.put(q,p);x.onsuccess=function(){if(q===undefined){q=null}u(q)};x.onerror=function(){t(x.error)}})["catch"](t)});k(r,s);return r}function l(p,r){var o=this;if(typeof p!=="string"){window.console.warn(p+" used as a key, but it is not a string.");p=String(p)}var q=new i(function(t,s){o.ready().then(function(){var u=o._dbInfo;var v=u.db.transaction(u.storeName,"readwrite").objectStore(u.storeName);var w=v["delete"](p);w.onsuccess=function(){t()};w.onerror=function(){s(w.error)};w.onabort=function(y){var x=y.target.error;if(x==="QuotaExceededError"){s(x)}}})["catch"](s)});k(q,r);return q}function f(q){var o=this;var p=new i(function(s,r){o.ready().then(function(){var t=o._dbInfo;var u=t.db.transaction(t.storeName,"readwrite").objectStore(t.storeName);var v=u.clear();v.onsuccess=function(){s()};v.onerror=function(){r(v.error)}})["catch"](r)});k(p,q);return p}function a(q){var o=this;var p=new i(function(s,r){o.ready().then(function(){var t=o._dbInfo;var u=t.db.transaction(t.storeName,"readonly").objectStore(t.storeName);var v=u.count();v.onsuccess=function(){s(v.result)};v.onerror=function(){r(v.error)}})["catch"](r)});g(p,q);return p}function j(r,q){var o=this;var p=new i(function(t,s){if(r<0){t(null);return}o.ready().then(function(){var u=o._dbInfo;var v=u.db.transaction(u.storeName,"readonly").objectStore(u.storeName);var x=false;var w=v.openCursor();w.onsuccess=function(){var y=w.result;if(!y){t(null);return}if(r===0){t(y.key)}else{if(!x){x=true;y.advance(r)}else{t(y.key)}}};w.onerror=function(){s(w.error)}})["catch"](s)});g(p,q);return p}function m(q){var o=this;var p=new i(function(s,r){o.ready().then(function(){var t=o._dbInfo;var u=t.db.transaction(t.storeName,"readonly").objectStore(t.storeName);var w=u.openCursor();var v=[];w.onsuccess=function(){var x=w.result;if(!x){s(v);return}v.push(x.key);x["continue"]()};w.onerror=function(){r(w.error)}})["catch"](r)});g(p,q);return p}function g(o,p){if(p){o.then(function(q){p(null,q)},function(q){p(q)})}}function k(o,p){if(p){o.then(function(q){d(p,q)},function(q){p(q)})}}function d(p,o){if(p){return setTimeout(function(){return p(null,o)},0)}}var c={_driver:"asyncStorage",_initStorage:h,getItem:n,setItem:e,removeItem:l,clear:f,length:a,key:j,keys:m};if(typeof define==="function"&&define.amd){define("asyncStorage",function(){return c})}else{if(typeof module!=="undefined"&&module.exports){module.exports=c}else{this.asyncStorage=c}}}).call(window);(function(){var f=(typeof module!=="undefined"&&module.exports)?require("promise"):this.Promise;var y=null;try{if(!this.localStorage||!("setItem" in this.localStorage)){return}y=this.localStorage}catch(z){return}function l(G){var F=this;var e={};if(G){for(var H in G){e[H]=G[H]}}e.keyPrefix=e.name+"/";F._dbInfo=e;return f.resolve()}var s="__lfsc__:";var i=s.length;var A="arbf";var n="blob";var E="si08";var v="ui08";var m="uic8";var d="si16";var C="si32";var r="ur16";var k="ui32";var p="fl32";var b="fl64";var t=i+A.length;function w(G){var e=this;var F=new f(function(I,H){e.ready().then(function(){var L=e._dbInfo.keyPrefix;for(var K=y.length-1;K>=0;K--){var J=y.key(K);if(J.indexOf(L)===0){y.removeItem(J)}}I()})["catch"](H)});x(F,G);return F}function j(F,H){var e=this;if(typeof F!=="string"){window.console.warn(F+" used as a key, but it is not a string.");F=String(F)}var G=new f(function(J,I){e.ready().then(function(){try{var L=e._dbInfo;var K=y.getItem(L.keyPrefix+F);if(K){K=u(K)}J(K)}catch(M){I(M)}})["catch"](I)});x(G,H);return G}function D(H,G){var e=this;var F=new f(function(J,I){e.ready().then(function(){var L=e._dbInfo;var K;try{K=y.key(H)}catch(M){K=null}if(K){K=K.substring(L.keyPrefix.length)}J(K)})["catch"](I)});x(F,G);return F}function q(G){var e=this;var F=new f(function(I,H){e.ready().then(function(){var J=e._dbInfo;var M=y.length;var L=[];for(var K=0;K<M;K++){if(y.key(K).indexOf(J.keyPrefix)===0){L.push(y.key(K).substring(J.keyPrefix.length))}}I(L)})["catch"](H)});x(F,G);return F}function h(G){var e=this;var F=new f(function(I,H){e.keys().then(function(J){I(J.length)})["catch"](H)});x(F,G);return F}function B(F,H){var e=this;if(typeof F!=="string"){window.console.warn(F+" used as a key, but it is not a string.");F=String(F)}var G=new f(function(J,I){e.ready().then(function(){var K=e._dbInfo;y.removeItem(K.keyPrefix+F);J()})["catch"](I)});x(G,H);return G}function u(J){if(J.substring(0,i)!==s){return JSON.parse(J)}var H=J.substring(t);var G=J.substring(i,t);var e=new ArrayBuffer(H.length*2);var I=new Uint16Array(e);for(var F=H.length-1;F>=0;F--){I[F]=H.charCodeAt(F)}switch(G){case A:return e;case n:return new Blob([e]);case E:return new Int8Array(e);case v:return new Uint8Array(e);case m:return new Uint8ClampedArray(e);case d:return new Int16Array(e);case r:return new Uint16Array(e);case C:return new Int32Array(e);case k:return new Uint32Array(e);case p:return new Float32Array(e);case b:return new Float64Array(e);default:throw new Error("Unkown type: "+G)}}function a(F){var J="";var H=new Uint16Array(F);try{J=String.fromCharCode.apply(null,H)}catch(I){for(var G=0;G<H.length;G++){J+=String.fromCharCode(H[G])}}return J}function o(J,L){var I="";if(J){I=J.toString()}if(J&&(J.toString()==="[object ArrayBuffer]"||J.buffer&&J.buffer.toString()==="[object ArrayBuffer]")){var H;var G=s;if(J instanceof ArrayBuffer){H=J;G+=A}else{H=J.buffer;if(I==="[object Int8Array]"){G+=E}else{if(I==="[object Uint8Array]"){G+=v}else{if(I==="[object Uint8ClampedArray]"){G+=m}else{if(I==="[object Int16Array]"){G+=d}else{if(I==="[object Uint16Array]"){G+=r}else{if(I==="[object Int32Array]"){G+=C}else{if(I==="[object Uint32Array]"){G+=k}else{if(I==="[object Float32Array]"){G+=p}else{if(I==="[object Float64Array]"){G+=b}else{L(new Error("Failed to get type for BinaryArray"))}}}}}}}}}}L(G+a(H))}else{if(I==="[object Blob]"){var F=new FileReader();F.onload=function(){var e=a(this.result);L(s+n+e)};F.readAsArrayBuffer(J)}else{try{L(JSON.stringify(J))}catch(K){window.console.error("Couldn't convert value into a JSON string: ",J);L(K)}}}}function c(F,G,I){var e=this;if(typeof F!=="string"){window.console.warn(F+" used as a key, but it is not a string.");F=String(F)}var H=new f(function(K,J){e.ready().then(function(){if(G===undefined){G=null}var L=G;o(G,function(O,N){if(N){J(N)}else{try{var M=e._dbInfo;y.setItem(M.keyPrefix+F,O)}catch(P){if(P.name==="QuotaExceededError"||P.name==="NS_ERROR_DOM_QUOTA_REACHED"){J(P)}}K(L)}})})["catch"](J)});x(H,I);return H}function x(e,F){if(F){e.then(function(G){F(null,G)},function(G){F(G)})}}var g={_driver:"localStorageWrapper",_initStorage:l,getItem:j,setItem:c,removeItem:B,clear:w,length:h,key:D,keys:q};if(typeof define==="function"&&define.amd){define("localStorageWrapper",function(){return g})}else{if(typeof module!=="undefined"&&module.exports){module.exports=g}else{this.localStorageWrapper=g}}}).call(window);(function(){var q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var e=(typeof module!=="undefined"&&module.exports)?require("promise"):this.Promise;var i=this.openDatabase;var t="__lfsc__:";var h=t.length;var z="arbf";var n="blob";var D="si08";var w="ui08";var m="uic8";var d="si16";var B="si32";var s="ur16";var k="ui32";var p="fl32";var b="fl64";var u=h+z.length;if(!i){return}function l(G){var F=this;var E={db:null};if(G){for(var H in G){E[H]=typeof(G[H])!=="string"?G[H].toString():G[H]}}return new e(function(J,I){try{E.db=i(E.name,String(E.version),E.description,E.size)}catch(K){return F.setDriver("localStorageWrapper").then(function(){return F._initStorage(G)}).then(J)["catch"](I)}E.db.transaction(function(L){L.executeSql("CREATE TABLE IF NOT EXISTS "+E.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){F._dbInfo=E;J()},function(N,M){I(M)})})})}function j(F,H){var E=this;if(typeof F!=="string"){window.console.warn(F+" used as a key, but it is not a string.");F=String(F)}var G=new e(function(J,I){E.ready().then(function(){var K=E._dbInfo;K.db.transaction(function(L){L.executeSql("SELECT * FROM "+K.storeName+" WHERE key = ? LIMIT 1",[F],function(O,N){var M=N.rows.length?N.rows.item(0).value:null;if(M){M=v(M)}J(M)},function(N,M){I(M)})})})["catch"](I)});y(G,H);return G}function c(F,G,I){var E=this;if(typeof F!=="string"){window.console.warn(F+" used as a key, but it is not a string.");F=String(F)}var H=new e(function(K,J){E.ready().then(function(){if(G===undefined){G=null}var L=G;o(G,function(O,N){if(N){J(N)}else{var M=E._dbInfo;M.db.transaction(function(P){P.executeSql("INSERT OR REPLACE INTO "+M.storeName+" (key, value) VALUES (?, ?)",[F,O],function(){K(L)},function(R,Q){J(Q)})},function(P){if(P.code===P.QUOTA_ERR){J(P)}})}})})["catch"](J)});y(H,I);return H}function A(F,H){var E=this;if(typeof F!=="string"){window.console.warn(F+" used as a key, but it is not a string.");F=String(F)}var G=new e(function(J,I){E.ready().then(function(){var K=E._dbInfo;K.db.transaction(function(L){L.executeSql("DELETE FROM "+K.storeName+" WHERE key = ?",[F],function(){J()},function(N,M){I(M)})})})["catch"](I)});y(G,H);return G}function x(G){var E=this;var F=new e(function(I,H){E.ready().then(function(){var J=E._dbInfo;J.db.transaction(function(K){K.executeSql("DELETE FROM "+J.storeName,[],function(){I()},function(M,L){H(L)})})})["catch"](H)});y(F,G);return F}function f(G){var E=this;var F=new e(function(I,H){E.ready().then(function(){var J=E._dbInfo;J.db.transaction(function(K){K.executeSql("SELECT COUNT(key) as c FROM "+J.storeName,[],function(N,M){var L=M.rows.item(0).c;I(L)},function(M,L){H(L)})})})["catch"](H)});y(F,G);return F}function C(H,G){var E=this;var F=new e(function(J,I){E.ready().then(function(){var K=E._dbInfo;K.db.transaction(function(L){L.executeSql("SELECT key FROM "+K.storeName+" WHERE id = ? LIMIT 1",[H+1],function(O,N){var M=N.rows.length?N.rows.item(0).key:null;J(M)},function(N,M){I(M)})})})["catch"](I)});y(F,G);return F}function r(G){var E=this;var F=new e(function(I,H){E.ready().then(function(){var J=E._dbInfo;J.db.transaction(function(K){K.executeSql("SELECT key FROM "+J.storeName,[],function(N,M){var O=[];for(var L=0;L<M.rows.length;L++){O.push(M.rows.item(L).key)}I(O)},function(M,L){H(L)})})})["catch"](H)});y(F,G);return F}function a(F){var E=new Uint8Array(F);var G;var H="";for(G=0;G<E.length;G+=3){H+=q[E[G]>>2];H+=q[((E[G]&3)<<4)|(E[G+1]>>4)];H+=q[((E[G+1]&15)<<2)|(E[G+2]>>6)];H+=q[E[G+2]&63]}if((E.length%3)===2){H=H.substring(0,H.length-1)+"="}else{if(E.length%3===1){H=H.substring(0,H.length-2)+"=="}}return H}function v(O){if(O.substring(0,h)!==t){return JSON.parse(O)}var G=O.substring(u);var N=O.substring(h,u);var H=G.length*0.75;var M=G.length;var L;var I=0;var J,F,E,Q;if(G[G.length-1]==="="){H--;if(G[G.length-2]==="="){H--}}var K=new ArrayBuffer(H);var P=new Uint8Array(K);for(L=0;L<M;L+=4){J=q.indexOf(G[L]);F=q.indexOf(G[L+1]);E=q.indexOf(G[L+2]);Q=q.indexOf(G[L+3]);P[I++]=(J<<2)|(F>>4);P[I++]=((F&15)<<4)|(E>>2);P[I++]=((E&3)<<6)|(Q&63)}switch(N){case z:return K;case n:return new Blob([K]);case D:return new Int8Array(K);case w:return new Uint8Array(K);case m:return new Uint8ClampedArray(K);case d:return new Int16Array(K);case s:return new Uint16Array(K);case B:return new Int32Array(K);case k:return new Uint32Array(K);case p:return new Float32Array(K);case b:return new Float64Array(K);default:throw new Error("Unkown type: "+N)}}function o(I,K){var H="";if(I){H=I.toString()}if(I&&(I.toString()==="[object ArrayBuffer]"||I.buffer&&I.buffer.toString()==="[object ArrayBuffer]")){var G;var F=t;if(I instanceof ArrayBuffer){G=I;F+=z}else{G=I.buffer;if(H==="[object Int8Array]"){F+=D}else{if(H==="[object Uint8Array]"){F+=w}else{if(H==="[object Uint8ClampedArray]"){F+=m}else{if(H==="[object Int16Array]"){F+=d}else{if(H==="[object Uint16Array]"){F+=s}else{if(H==="[object Int32Array]"){F+=B}else{if(H==="[object Uint32Array]"){F+=k}else{if(H==="[object Float32Array]"){F+=p}else{if(H==="[object Float64Array]"){F+=b}else{K(new Error("Failed to get type for BinaryArray"))}}}}}}}}}}K(F+a(G))}else{if(H==="[object Blob]"){var E=new FileReader();E.onload=function(){var L=a(this.result);K(t+n+L)};E.readAsArrayBuffer(I)}else{try{K(JSON.stringify(I))}catch(J){window.console.error("Couldn't convert value into a JSON string: ",I);K(null,J)}}}}function y(E,F){if(F){E.then(function(G){F(null,G)},function(G){F(G)})}}var g={_driver:"webSQLStorage",_initStorage:l,getItem:j,setItem:c,removeItem:A,clear:x,length:f,key:C,keys:r};if(typeof define==="function"&&define.amd){define("webSQLStorage",function(){return g})}else{if(typeof module!=="undefined"&&module.exports){module.exports=g}else{this.webSQLStorage=g}}}).call(window);(function(){var n=(typeof module!=="undefined"&&module.exports)?require("promise"):this.Promise;var d={};var j={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"};var h=[j.INDEXEDDB,j.WEBSQL,j.LOCALSTORAGE];var e=["clear","getItem","key","keys","length","removeItem","setItem"];var i={DEFINE:1,EXPORT:2,WINDOW:3};var a={description:"",driver:h.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};var o=i.WINDOW;if(typeof define==="function"&&define.amd){o=i.DEFINE}else{if(typeof module!=="undefined"&&module.exports){o=i.EXPORT}}var m=(function(s){var r=r||s.indexedDB||s.webkitIndexedDB||s.mozIndexedDB||s.OIndexedDB||s.msIndexedDB;var q={};q[j.WEBSQL]=!!s.openDatabase;q[j.INDEXEDDB]=!!(function(){if(typeof s.openDatabase!=="undefined"&&s.navigator&&s.navigator.userAgent&&/Safari/.test(s.navigator.userAgent)&&!/Chrome/.test(s.navigator.userAgent)){return false}try{return r&&typeof r.open==="function"&&typeof s.IDBKeyRange!=="undefined"}catch(t){return false}})();q[j.LOCALSTORAGE]=!!(function(){try{return(s.localStorage&&("setItem" in s.localStorage)&&(s.localStorage.setItem))}catch(t){return false}})();return q})(this);var f=Array.isArray||function(q){return Object.prototype.toString.call(q)==="[object Array]"};function p(q,r){q[r]=function(){var s=arguments;return q.ready().then(function(){return q[r].apply(q,s)})}}function k(){for(var s=1;s<arguments.length;s++){var q=arguments[s];if(q){for(var r in q){if(q.hasOwnProperty(r)){if(f(q[r])){arguments[0][r]=q[r].slice()}else{arguments[0][r]=q[r]}}}}}return arguments[0]}function c(q){for(var r in j){if(j.hasOwnProperty(r)&&j[r]===q){return true}}return false}var g=this;function l(q){this._config=k({},a,q);this._driverSet=null;this._ready=false;this._dbInfo=null;for(var r=0;r<e.length;r++){p(this,e[r])}this.setDriver(this._config.driver)}l.prototype.INDEXEDDB=j.INDEXEDDB;l.prototype.LOCALSTORAGE=j.LOCALSTORAGE;l.prototype.WEBSQL=j.WEBSQL;l.prototype.config=function(q){if(typeof(q)==="object"){if(this._ready){return new Error("Can't call config() after localforage has been used.")}for(var r in q){if(r==="storeName"){q[r]=q[r].replace(/\W/g,"_")}this._config[r]=q[r]}if("driver" in q&&q.driver){this.setDriver(this._config.driver)}return true}else{if(typeof(q)==="string"){return this._config[q]}else{return this._config}}};l.prototype.defineDriver=function(r,t,q){var s=new n(function(C,D){try{var v=r._driver;var u=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");var w=new Error("Custom driver name already in use: "+r._driver);if(!r._driver){D(u);return}if(c(r._driver)){D(w);return}var B=e.concat("_initStorage");for(var z=0;z<B.length;z++){var x=B[z];if(!x||!r[x]||typeof r[x]!=="function"){D(u);return}}var y=n.resolve(true);if("_support" in r){if(r._support&&typeof r._support==="function"){y=r._support()}else{y=n.resolve(!!r._support)}}y.then(function(E){m[v]=E;d[v]=r;C()},D)}catch(A){D(A)}});s.then(t,q);return s};l.prototype.driver=function(){return this._driver||null};l.prototype.ready=function(s){var q=this;var r=new n(function(u,t){q._driverSet.then(function(){if(q._ready===null){q._ready=q._initStorage(q._config)}q._ready.then(u,t)})["catch"](t)});r.then(s,s);return r};l.prototype.setDriver=function(q,u,s){var r=this;if(typeof q==="string"){q=[q]}this._driverSet=new n(function(z,y){var w=r._getFirstSupportedDriver(q);var v=new Error("No available storage method found.");if(!w){r._driverSet=n.reject(v);y(v);return}r._dbInfo=null;r._ready=null;if(c(w)){if(o===i.DEFINE){require([w],function(A){r._extend(A);z()});return}else{if(o===i.EXPORT){var x;switch(w){case r.INDEXEDDB:x=require("./drivers/indexeddb");break;case r.LOCALSTORAGE:x=require("./drivers/localstorage");break;case r.WEBSQL:x=require("./drivers/websql")}r._extend(x)}else{r._extend(g[w])}}}else{if(d[w]){r._extend(d[w])}else{r._driverSet=n.reject(v);y(v);return}}z()});function t(){r._config.driver=r.driver()}this._driverSet.then(t,t);this._driverSet.then(u,s);return this._driverSet};l.prototype.supports=function(q){return !!m[q]};l.prototype._extend=function(q){k(this,q)};l.prototype._getFirstSupportedDriver=function(q){if(q&&f(q)){for(var r=0;r<q.length;r++){var s=q[r];if(this.supports(s)){return s}}}return null};l.prototype.createInstance=function(q){return new l(q)};var b=new l();if(o===i.DEFINE){define("localforage",function(){return b})}else{if(o===i.EXPORT){module.exports=b}else{this.localforage=b}}}).call(window);