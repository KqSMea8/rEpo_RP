define(["jquery","common","stringres","global"],function(G,C,r,a){var f="";var F="";function L(Y){try{C.PutToDebugLog(4,"_call: onCreate");G("#call_menu_ul").on("click","li",function(aa){A(G(this).attr("id"))});G("#btn_call_menu").on("click",function(){u("#call_menu_ul")});G("#btn_call_menu").attr("title",r.get("hint_menu"));G("#btn_hangup").on("click",function(){R()});G("#btn_accept").on("click",function(){I()});G("#btn_reject").on("click",function(){T()});G("#btn_audiodevice").on("click",function(){wphone.audiodevice()});var Z;G(window).resize(function(){if(G.mobile.activePage.attr("id")==="page_call"){if(!C.isNull(Z)){clearTimeout(Z)}Z=setTimeout(function(){d();j()},100)}});G("#numpad_btn_dp_1").on("click",function(){W("1")});G("#numpad_btn_dp_2").on("click",function(){W("2")});G("#numpad_btn_dp_3").on("click",function(){W("3")});G("#numpad_btn_dp_4").on("click",function(){W("4")});G("#numpad_btn_dp_5").on("click",function(){W("5")});G("#numpad_btn_dp_6").on("click",function(){W("6")});G("#numpad_btn_dp_7").on("click",function(){W("7")});G("#numpad_btn_dp_8").on("click",function(){W("8")});G("#numpad_btn_dp_9").on("click",function(){W("9")});G("#numpad_btn_dp_0").on("click",function(){W("0")});G("#numpad_btn_dp_ast").on("click",function(){W("*")});G("#numpad_btn_dp_diez").on("click",function(){W("#")})}catch(X){C.PutToDebugLogException(2,"_call: onCreate",X)}}function m(Y){try{C.PutToDebugLog(4,"_call: onStart");a.isCallStarted=true;a.hangupPressedCount=0;j();if(!C.isNull(document.getElementById("app_name_call"))&&C.GetParameter("devicetype")!==C.DEVICE_WIN_SOFTPHONE()){document.getElementById("app_name_call").innerHTML=r.get("app_name")}G(".separator_line_thick").css("background-color",C.HoverCalc(C.getBgColor("#call_header"),-30));G("#btn_hangup_img").attr("src","images/btn_hangup_txt.png");if(!C.isNull(document.getElementById("btn_audiodevice"))){document.getElementById("btn_audiodevice").innerHTML=r.get("btn_audio_device")}if(C.GetParameter("displayvolumecontrols")==="true"){G("#volumecontrols").show()}if(C.GetParameter("displayaudiodevice")==="true"){G("#audiodevice_container").show()}var aa=C.GetParameter("volumein");if(C.isNull(aa)||aa.length<1||!C.IsNumber(aa)){aa="50"}G("#volumein").val(aa);G("#volumein").slider("refresh");var Z=C.GetParameter("volumeout");if(C.isNull(Z)||Z.length<1||!C.IsNumber(Z)){Z="50"}G("#volumeout").val(Z);G("#volumeout").slider("refresh");G("#volumein").on("slidestop",function(ac,ad){var ab=this.value;if(C.isNull(ab)||ab.length<1){return}ab=C.Trim(ab);C.SaveParameter("volumein",ab);C.PutToDebugLog(5,"volumein slidestop: "+this.value);wphone.setvolume(0,ab)});G("#volumeout").on("slidestop",function(ac,ad){var ab=this.value;if(C.isNull(ab)||ab.length<1){return}ab=C.Trim(ab);C.SaveParameter("volumeout",ab);C.PutToDebugLog(5,"volumeout slidestop: "+this.value);wphone.setvolume(1,ab)});d();f=C.GetIntentParam(a.intentcall,"calltype");if(a.isdebugversionakos){f="outgoing"}a.callName="";F=C.GetIntentParam(a.intentcall,"number");a.callName=C.GetIntentParam(a.intentcall,"name");if(C.isNull(a.callName)||a.callName.length<1){a.callName=C.GetContactNameFromNumber(F)}if(a.callName!==F){G("#calledcaller").html(a.callName+"&nbsp;("+F+")&nbsp;")}else{G("#calledcaller").html(F)}if(f==="outgoing"){G("#acceptreject_layout").hide();G("#hangup_layout").show();G("#callfunctions_layout").show();if(!a.isdebugversionakos){setTimeout(function(){var ab=r.get("rating_uri");if(!C.isNull(ab)&&ab.length>2&&!C.isNull(F)&&F.length>0&&(C.isNull(a.rating)||(a.rating).length<1)){C.UriParser(ab,"",F,"","","ratingrequest")}},3000)}}if(f==="incoming"){G("#hangup_layout").hide();G("#callfunctions_layout").hide();G("#acceptreject_layout").show()}j();setTimeout(function(){j()},200)}catch(X){C.PutToDebugLogException(2,"_call: onStart",X)}}function j(){try{var ab=false;var X=false;if(G("#volumecontrols").is(":visible")){ab=true}if(G("#audiodevice_container").is(":visible")){X=true}G("#page_call_content").height(C.GetDeviceHeight()-G("#call_header").height()-G(".separator_line_thick").height());var aa=C.GetDeviceHeight()-G("#call_header").height();G("#page_call_content").height(aa-3);var ac=aa-G("#hangup_layout").height()-G("#callfunctions_layout").height()-G(".separator_color_bg").height()-6;var Z=Math.floor(ac/5);G("#numpad_btn_grid .ui-btn").height(Z);G("#numpad_number_container").height(Z);G("#numpad_number_container").css("line-height",Z+"px");if(f==="outgoing"){aa=aa-G("#hangup_layout").height()-G("#callfunctions_layout").height()-G(".separator_color_bg").height()-3;if(ab){aa=aa-G("#volumecontrols").height()}if(X){aa=aa-G("#audiodevice_container").height()}aa=Math.floor(aa);G("#contact_image").height(aa);G("#contact_image").css("line-height",aa+"px")}if(f==="incoming"){if(document.getElementById("acceptreject_layout").style.display==="block"){aa=aa-G("#acceptreject_layout").height()-5;if(ab){aa=aa-G("#volumecontrols").height()}if(X){aa=aa-G("#audiodevice_container").height()}aa=Math.floor(aa)}else{aa=aa-G("#hangup_layout").height()-G("#callfunctions_layout").height()-G(".separator_color_bg").height()-3;if(ab){aa=aa-G("#volumecontrols").height()}if(X){aa=aa-G("#audiodevice_container").height()}aa=Math.floor(aa)}G("#contact_image").height(aa);G("#contact_image").css("line-height",aa+"px")}}catch(Y){C.PutToDebugLogException(2,"_call: MeasureCall",Y)}}function R(){try{G("#mute_status").removeClass("callfunc_status_on");G("#hold_status").removeClass("callfunc_status_on");G("#speaker_status").removeClass("callfunc_status_on");a.hangupPressedCount++;if(a.hangupPressedCount<2){G("#callfunctions_layout").hide();G("#btn_hangup_img").attr("src","images/btn_close_txt.png");wphone.hangup()}else{wphone.hangup();G.mobile.back();a.hangupPressedCount=0}}catch(X){C.PutToDebugLogException(2,"_call: HangupCall",X)}}function I(){try{a.acceptReject=true;G("#acceptreject_layout").hide();G("#hangup_layout").show();G("#callfunctions_layout").show();setTimeout(function(){j()},200);wphone.accept(-2)}catch(X){C.PutToDebugLogException(2,"_call: AcceptCall",X)}}function T(){try{G("#acceptreject_layout").hide();G("#callfunctions_layout").hide();G("#hangup_layout").show();setTimeout(function(){j()},200);a.acceptReject=true;a.hangupPressedCount=1;wphone.reject(-2)}catch(X){C.PutToDebugLogException(2,"_call: RejectCall",X)}}function W(Y){try{C.PutToDebugLog(5,"EVENT, _call SendDtmf: "+Y);wphone.dtmf(-1,Y);var X=G("#numpad_number").html();if(C.isNull(X)){X=""}if(X.length>18){X=X.substring(10,X.length)+" "}G("#numpad_number").html(X+Y)}catch(Z){C.PutToDebugLogException(2,"_call: SendDtmf",Z)}}function U(){try{G.mobile.back()}catch(X){C.PutToDebugLogException(2,"_call: CloseCall",X)}}function k(){try{a.hangupPressedCount=1}catch(X){C.PutToDebugLogException(2,"_call: OnCallerHangup",X)}}function d(){try{var ab=G("#callfunctions_layout").html();var aa=wphone.GetAvailableCallfunctions();if(C.isNull(aa)||aa.length<3){C.PutToDebugLog(2,"ERROR, _call: AddCallFunctions no available callfunctions (1)");return}var ad=document.getElementById("callfunctions_layout");if(C.isNull(ad)){C.PutToDebugLog(2,"ERROR, _call: AddCallFunctions no available callfunctions (2)");return}var Y=aa.split(",");var ae="";if(C.isNull(Y)||Y.length<1){C.PutToDebugLog(2,"ERROR, _call: AddCallFunctions no available callfunctions (3)");return}if(C.isNull(ab)||ab.length<10){var ag='<div class="callfunc_btn_container"><button class="ui-btn callfunc_btn noshadow" data-theme="b" id="btn_[REPLACESTR]"><img src="images/btn_[REPLACESTR]_txt.png" /><span class="callfunc_status" id="[REPLACESTR]_status" >&nbsp;</span></button></div>';var ac='<div class="callfunc_spacer">&nbsp;</div>';for(var Z=0;Z<Y.length;Z++){if(C.isNull(Y)||C.Trim(Y[Z]).length<1){continue}var ah=C.ReplaceAll(ag,"[REPLACESTR]",Y[Z]);ae=ae+ah;if(Z<Y.length-1){ae=ae+ac}}G("#callfunctions_layout").html(ae);G("#btn_conference").off("click");G("#btn_conference").on("click",function(ai){b("conference")});G("#btn_transfer").off("click");G("#btn_transfer").on("click",function(ai){b("transfer")});G("#btn_numpad").off("click");G("#btn_numpad").on("click",function(ai){b("numpad")});G("#btn_mute").off("click");G("#btn_mute").on("click",function(ai){b("mute")});G("#btn_hold").off("click");G("#btn_hold").on("click",function(ai){b("hold")});G("#btn_speaker").off("click");G("#btn_speaker").on("click",function(ai){b("speaker")});G("#btn_conference").attr("title",r.get("hint_conference"));G("#btn_transfer").attr("title",r.get("hint_transfer"));G("#btn_numpad").attr("title",r.get("hint_dialpad_dtmf"));G("#btn_mute").attr("title",r.get("hint_mute"));G("#btn_hold").attr("title",r.get("hint_hold"));G("#btn_speaker").attr("title",r.get("hint_speaker"))}var af=C.GetDeviceWidth()-((Y.length-1)*G(".callfunc_spacer").width());af=Math.round(af*100/C.GetDeviceWidth()*100)/100;af=Math.floor(af/Y.length*100)/100;af=af-0.1;G(".callfunc_btn_container").width(af+"%")}catch(X){C.PutToDebugLogException(2,"_call: AddCallFunctions",X)}}function b(Z){try{if(C.isNull(Z)){return}C.PutToDebugLog(4,"EVENT, _call CallfunctionsOnclick func = "+Z);if(Z==="mute"){var aa=e();if(!aa){return}}if(Z==="hold"){var aa=x();if(!aa){return}}var X=document.getElementById(Z+"_status");if(X!==undefined&&X!==null&&Z!=="conference"&&Z!=="transfer"){if(G(X).hasClass("callfunc_status_on")){G(X).removeClass("callfunc_status_on")}else{G(X).addClass("callfunc_status_on")}}if(Z==="conference"){t("")}if(Z==="transfer"){c("")}if(Z==="speaker"){H()}if(Z==="numpad"){n()}}catch(Y){C.PutToDebugLogException(2,"_call: CallfunctionsOnclick",Y)}}var o=false;var w=false;function n(){try{if(G("#numpad").css("display")==="none"){if(G("#audiodevice_container").is(":visible")){o=true}else{o=false}if(G("#volumecontrols").is(":visible")){w=true}else{w=false}document.getElementById("numpad_number").innerHTML="&nbsp;";G("#contact_image").hide();G("#audiodevice_container").hide();G("#volumecontrols").hide();G("#numpad").show()}else{G("#numpad").hide();G("#contact_image").show();if(o){G("#audiodevice_container").show()}if(w){G("#volumecontrols").show()}j()}}catch(X){C.PutToDebugLogException(2,"_call: Numpad",X)}}function t(Y){try{C.PutToDebugLog(1,"EVENT, "+r.get("initiate_conference"));if(a.isdebugversionakos){C.GetContacts(function(){})}var ad=C.GetDeviceWidth();if(!C.isNull(ad)&&C.IsNumber(ad)&&ad>100){ad=Math.floor(ad/1.2)}else{ad=220}var Z="btn_add_contact_txt.png";var af='<div id="conference_popup" data-role="popup" class="ui-content messagePopup" data-overlay-theme="a" data-theme="a" style="max-width:'+ad+'px;"><div data-role="header" data-theme="b"><a href="#" data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-right closePopup">Close</a><h1 class="adialog_title">'+r.get("conference_title")+'</h1></div><div role="main" class="ui-content adialog_content adialog_btn_nexttoinput"><span>'+r.get("phone_nr")+'</span><div style="clear: both;"><!--//--></div><input type="text" id="conference_input" name="setting_item" data-theme="a"/><button id="btn_pickct" class="btn_nexttoinput ui-btn ui-btn-corner-all ui-btn-b noshadow"><img src="images/'+Z+'"></button></div><div data-role="footer" data-theme="b" class="adialog_footer"><a href="#" id="adialog_positive" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back" data-transition="flow">'+r.get("btn_ok")+'</a><a href="#" id="adialog_negative" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back">'+r.get("btn_cancel")+"</a></div></div>";var ae=function(){};G.mobile.activePage.append(af).trigger("create");G.mobile.activePage.find(".closePopup").bind("tap",function(ag){G.mobile.activePage.find(".messagePopup").popup("close")});G.mobile.activePage.find(".messagePopup").popup().popup("open").bind({popupafterclose:function(){G(this).unbind("popupafterclose").remove();G("#adialog_positive").off("click");G("#adialog_negative").off("click");G("#btn_pickct").off("click");ae()}});var ab=0;G("#conference_popup").keypress(function(ag){ab++;if(ag.which===13&&ab<2){ag.preventDefault();G("#adialog_positive").click()}else{return}});var ac=document.getElementById("conference_input");var X=C.GetParameter("last_conference_number");if(!C.isNull(X)&&X.length>1){ac.value=C.Trim(X)}if(!C.isNull(Y)&&Y.length>0){ac.value=Y}if(!C.isNull(ac)){ac.focus()}G("#adialog_positive").on("click",function(ah){C.PutToDebugLog(5,"EVENT, call Conference ok onclick");var ag=C.Trim(ac.value);if(!C.isNull(ag)&&ag.length>0){wphone.conference(-1,ag);C.SaveParameter("last_conference_number",ag)}else{C.ShowToast(r.get("err_msg_4"));G.mobile.back()}});G("#adialog_negative").on("click",function(ag){});G("#btn_pickct").on("click",function(ag){G.mobile.activePage.find(".messagePopup").popup("close");G("#conference_popup").on("popupafterclose",function(ah){G("#conference_popup").off("popupafterclose");C.PickContact(t)})});O(N)}catch(aa){C.PutToDebugLogException(2,"_call: Conference",aa)}}function c(X){try{C.PutToDebugLog(1,"EVENT, "+r.get("initiate_call_transfer"));if(a.isdebugversionakos){C.GetContacts(function(){})}var ad=C.GetDeviceWidth();if(!C.isNull(ad)&&C.IsNumber(ad)&&ad>100){ad=Math.floor(ad/1.2)}else{ad=220}var Y="btn_transfer_txt.png";var af='<div id="transfer_popup" data-role="popup" class="ui-content messagePopup" data-overlay-theme="a" data-theme="a" style="max-width:'+ad+'px;"><div data-role="header" data-theme="b"><a href="#" data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-right closePopup">Close</a><h1 class="adialog_title">'+r.get("transfer_title")+'</h1></div><div role="main" class="ui-content adialog_content adialog_btn_nexttoinput"><span>'+r.get("phone_nr")+'</span><div style="clear: both;"><!--//--></div><input type="text" id="transfer_input" name="setting_item" data-theme="a"/><button id="btn_pickct" class="btn_nexttoinput ui-btn ui-btn-corner-all ui-btn-b noshadow"><img src="images/'+Y+'"></button></div><div data-role="footer" data-theme="b" class="adialog_footer"><a href="#" id="adialog_positive" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back" data-transition="flow">'+r.get("btn_ok")+'</a><a href="#" id="adialog_negative" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b adialog_2button" data-rel="back">'+r.get("btn_cancel")+"</a></div></div>";var ae=function(){};G.mobile.activePage.append(af).trigger("create");G.mobile.activePage.find(".closePopup").bind("tap",function(ag){G.mobile.activePage.find(".messagePopup").popup("close")});G.mobile.activePage.find(".messagePopup").popup().popup("open").bind({popupafterclose:function(){G(this).unbind("popupafterclose").remove();G("#adialog_positive").off("click");G("#adialog_negative").off("click");G("#btn_pickct").off("click");ae()}});var ab=0;G("#transfer_popup").keypress(function(ag){ab++;if(ag.which===13&&ab<2){ag.preventDefault();G("#adialog_positive").click()}else{return}});var ac=document.getElementById("transfer_input");var aa=C.GetParameter("last_transfer_number");if(!C.isNull(aa)&&aa.length>1){ac.value=C.Trim(aa)}if(!C.isNull(X)&&X.length>0){ac.value=X}if(!C.isNull(ac)){ac.focus()}G("#adialog_positive").on("click",function(ah){C.PutToDebugLog(5,"EVENT, call Transfer ok onclick");var ag=C.Trim(ac.value);if(!C.isNull(ag)&&ag.length>0){wphone.transfer(2,ag);C.SaveParameter("last_transfer_number",ag)}else{C.ShowToast(r.get("err_msg_4"));G.mobile.back()}});G("#adialog_negative").on("click",function(ag){});G("#btn_pickct").on("click",function(ag){G.mobile.activePage.find(".messagePopup").popup("close");G("#transfer_popup").on("popupafterclose",function(ah){G("#transfer_popup").off("popupafterclose");C.PickContact(c)})});O(q)}catch(Z){C.PutToDebugLogException(2,"_call: Transfer",Z)}}function e(){try{var aa=0;try{aa=C.StrToInt(C.Trim(C.GetParameter("defmute")))}catch(Z){C.PutToDebugLogException(3,"_call Mute API_MuteEx",Z)}var Y=wphone.mutex(-1,a.muteState,aa);O(D);C.PutToDebugLog(2,"AKOSMUTE muteSuccess: "+Y);if(Y){C.PutToDebugLog(2,"AKOSMUTE global.muteState: "+a.muteState);if(a.muteState){C.PutToDebugLog(1,"STATUS, "+r.get("muted"))}else{C.PutToDebugLog(1,"STATUS, "+r.get("unmuted"))}a.muteState=!a.muteState;return true}}catch(X){C.PutToDebugLogException(2,"_call: Mute",X)}return false}function x(){try{var X=wphone.hold(-1,a.holdState);O(Q);if(X){a.holdState=!a.holdState;return true}}catch(Y){C.PutToDebugLogException(2,"_call: Hold",Y)}return false}function H(){try{alert("speaker on / off")}catch(X){C.PutToDebugLogException(2,"_call: Hold",X)}}var N=0;var q=1;var D=2;var Q=3;var p=4;var s=5;var g=6;var V=7;var S=8;function O(ad){var ac=0;var aa=false;try{var ae=C.GetParameter("callfunctionsbtnusage");ac=1;if(C.isNull(ae)||ae.length<1){return}ac=2;var ab=ae.split(",");ac=3;var X=[];ac=4;for(var Y=0;Y<ab.length;Y++){X[Y]=C.StrToInt(ab[Y]);if(X[Y]>20||X[Y]<-20){aa=true}}ac=5;switch(ad){case N:X[N]++;return;case q:X[q]++;return;case D:X[D]++;return;case Q:X[Q]++;return;case p:X[p]++;return;case s:X[s]++;return;case g:X[g]++;return;case V:X[V]++;return;case S:X[S]++;return}if(aa){for(var Y=0;Y<X.length;Y++){X[Y]=Math.floor(X[Y]/2)}}ac=6;ae=X[N]+","+X[q]+","+X[D]+","+X[Q]+","+X[p]+","+X[s]+","+X[g]+","+X[V]+","+X[S];ac=7;C.SaveParameter("callfunctionsbtnusage",ae);ac=8}catch(Z){C.PutToDebugLogException(2,"_call: CFUsageClickCount ("+ac.toString()+")",Z)}}var l="#menuitem_call_conference";var i="#menuitem_call_transfer";var h="#menuitem_call_numpad";var v="#menuitem_call_mute";var M="#menuitem_call_hold";var B="#menuitem_call_speaker";var P="#menuitem_volume_controls";var z="#menuitem_audio_device";function u(ab){try{if(C.GetParameter("devicetype")===C.DEVICE_WIN_SOFTPHONE()){G("#btn_call_menu").removeAttr("data-transition")}if(C.isNull(ab)||ab.lenght<1){C.PutToDebugLog(2,"ERROR, _call: CreateOptionsMenu menuid null");return}if(G(ab).length<=0){C.PutToDebugLog(2,"ERROR, _call: CreateOptionsMenu can't get reference to Menu");return}if(ab.charAt(0)!=="#"){ab="#"+ab}G(ab).html("");var Y=wphone.GetAvailableCallfunctions();if(C.isNull(Y)||Y.length<3){C.PutToDebugLog(2,"ERROR, _call: CreateOptionsMenu no available callfunctions (1)");return}if(Y.indexOf("conference")>=0){G(ab).append('<li id="'+l+'"><a data-rel="back">'+r.get("menu_conference")+"</a></li>").listview("refresh")}if(Y.indexOf("transfer")>=0){G(ab).append('<li id="'+i+'"><a data-rel="back">'+r.get("menu_transfer")+"</a></li>").listview("refresh")}if(Y.indexOf("numpad")>=0){G(ab).append('<li id="'+h+'"><a data-rel="back">'+r.get("menu_numpad")+"</a></li>").listview("refresh")}if(Y.indexOf("mute")>=0){G(ab).append('<li id="'+v+'"><a data-rel="back">'+r.get("menu_mute")+"</a></li>").listview("refresh")}if(Y.indexOf("hold")>=0){G(ab).append('<li id="'+M+'"><a data-rel="back">'+r.get("menu_hold")+"</a></li>").listview("refresh")}if(Y.indexOf("speaker")>=0){G(ab).append('<li id="'+B+'"><a data-rel="back">'+r.get("menu_speaker")+"</a></li>").listview("refresh")}if(C.GetParameter("displayvolumecontrols")==="false"){var aa="";if(G("#volumecontrols").is(":visible")){aa=r.get("menu_volumehide")}else{aa=r.get("menu_volumeshow")}G(ab).append('<li id="'+P+'"><a data-rel="back">'+aa+"</a></li>").listview("refresh")}if(C.GetParameter("displayaudiodevice")==="false"){var X="";if(G("#audiodevice_container").is(":visible")){X=r.get("menu_audiodevicehide")}else{X=r.get("menu_audiodeviceshow")}G(ab).append('<li id="'+z+'"><a data-rel="back">'+X+"</a></li>").listview("refresh")}return true}catch(Z){C.PutToDebugLogException(2,"_call: CreateOptionsMenu",Z)}return false}function A(Y){try{if(C.isNull(Y)||Y.length<1){return}G("#call_menu").on("popupafterclose",function(Z){G("#call_menu").off("popupafterclose");switch(Y){case l:b("conference");break;case i:b("transfer");break;case h:b("numpad");break;case v:b("mute");break;case M:b("hold");break;case B:b("speaker");break;case P:J();break;case z:E();break}})}catch(X){C.PutToDebugLogException(2,"_call: MenuItemSelected",X)}}function J(){try{if(G("#volumecontrols").is(":visible")){G("#volumecontrols").hide()}else{G("#volumecontrols").show()}j()}catch(X){C.PutToDebugLogException(2,"_call: ShowHideVolumeControls",X)}}function E(){try{if(G("#audiodevice_container").is(":visible")){G("#audiodevice_container").hide()}else{G("#audiodevice_container").show()}j()}catch(X){C.PutToDebugLogException(2,"_call: ShowHideVolumeControls",X)}}function y(Y){try{C.PutToDebugLog(4,"_call: onStop");a.isCallStarted=false;a.hangupPressedCount=0;G("#call_duration").html("");a.rating=""}catch(X){C.PutToDebugLogException(2,"_call: onStop",X)}}function K(Y){try{C.PutToDebugLog(4,"_call: onDestroy");a.isCallStarted=false}catch(X){C.PutToDebugLogException(2,"_call: onDestroy",X)}}return{onCreate:L,onStart:m,onStop:y,onDestroy:K,CloseCall:U,OnCallerHangup:k}});